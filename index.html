<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/css-doodle@latest/css-doodle.min.js"></script>
</head>
<body>
    <!-- <css-doodle class="doodle" grid="12">    
        :doodle {
        @grid: 12 / 100vmax;
        background: black;
        filter: blur(.1px);
        transform: scale(1.1)
        }
    
        @random {
        border: 3px solid hsla(158, 70%, 68%, @rand(0.3));
        }
    
        @random {
        filter: blur(1.5px);
        }
    
        @random {
        animation: move 5s linear alternate infinite;
        }
    
        @random(0.1) {
        animation: flicker 5s ease infinite;
        }
    
        @keyframes move {
        0% {
        transform: translate(
        @rand(-50%, 50%), @rand(-50%, 50%)
        );
        }
    
        100% {
        transform: translate(
        @rand(-50%, 50%), @rand(-50%, 50%)
        );
        }
        }
    
        @keyframes flicker {
        0% {
        opacity: 1;
        }
    
        50% {
        opacity: 0;
        }
    
        100% {
        opacity: 1;
        }
        }
    
        border-radius: 50%;
        background: hsla(158, 70%, 68%, @rand(0.6));
        transform: scale(@rand(.5, 1.2))
        translate(
        @rand(-50%, 50%), @rand(-50%, 50%)
        );
    
    </css-doodle> -->


    
<div class="container">
    <h1>Caption generator</h1>
   
    <input type="text"  placeholder="Enter Keyword" id="tech">
    

    <div id="loading" style="margin-top: 10px;">Loading...</div>

    <div id="res" style="margin-top:12px;"></div>

    <br><button id="btn">Generate</button>
    <button id="copy" onclick="copycaption(document.getElementById('res').innerText)">
       Copy caption
        <!-- <img src="copy.png"width="20px"> -->
    </button>

</div>      
<script type="text/javascript">
    const myDoodle = document.querySelector('.doodle');

    myDoodle.addEventListener('click', () => {
    myDoodle.update();
});
</script>
<script type="importmap">
    {
      "imports": {
        "@google/generative-ai": "https://esm.run/@google/generative-ai"
      }
    }
</script>
<script>
    function copycaption(text) {
        // Create a temporary textarea element
        const tempTextarea = document.createElement('textarea');
        tempTextarea.value =text;
        document.body.appendChild(tempTextarea);

        // Select and copy the text
        tempTextarea.select();
        document.execCommand('copy');

        // Remove the temporary textarea
        document.body.removeChild(tempTextarea);

        // Optional: Provide feedback to the user
        alert('Caption copied to clipboard!');
    }
</script>

<script type="module">
    import { GoogleGenerativeAI } from "@google/generative-ai";
    const API_KEY = "AIzaSyC94i7BxYgdSatSBG58cRiA5ZVoTbbvn_s";

    // Access your API key (see "Set up your API key" above)
    const genAI = new GoogleGenerativeAI(API_KEY);
    const model = genAI.getGenerativeModel({ model: "gemini-2.0-flash-exp" });

    let context = {
  persona: "You are a witty and creative social media manager.", 
  instructions: "Generate a short, engaging caption for a social media post based on the given keyword. The caption should be concise, use relevant emojis, and encourage user interaction (e.g., asking a question, using a call to action).",
  example_phrases: [
    "Keyword: 'Sunset' ðŸŒ… Caption: 'Chasing sunsets and making memories. âœ¨ What's your favorite spot to watch the sunset?'", 
    "Keyword: 'Travel' âœˆï¸ Caption: 'Wanderlust is calling! ðŸ—ºï¸ Who's ready for an adventure?",
    "Keyword: 'Food' ðŸ” Caption: 'Food coma incoming. ðŸ¤¤ What's your guilty pleasure food?",
    "Keyword: 'Lovely food' ðŸ“Caption: 'ðŸ´ Taste buds on a flavor journey. ðŸ° Life's too short for average food. â¤ï¸ Food is my love language. ðŸ› Edible art, one plate at a time'"
  ]
};

    document.getElementById('loading').style.display = "none"

    if (document.getElementById('tech').innerHTML=="")
    {
        document.getElementById('res').innerHTML="Fill this box with your emotions...ðŸ˜‚ðŸ˜‰ðŸ˜‹ðŸ¥°ðŸ˜£ðŸ˜­ðŸ˜°";
    }
    else{
        test()
    }
    const test = async () => {
        const tech = document.getElementById('tech').value
        document.getElementById('loading').style.display = "block"

       
        let prompt = `
        ${context.persona} \n\n
        ${context.instructions} \n\n
        Example responses \n <span class="math-inline"> ${context.example_phrases}\n\n\n\n
        Make caption on ${tech} and only write caption.
    `    
        let res = await model.generateContent(prompt)
        const response = await res.response;
        const text = response.text();
        console.log('text: ', text);
        document.getElementById('res').innerHTML = `
            <b>Caption:</b> ${text}
        `
        document.getElementById('loading').style.display = "none"
    }
    document.getElementById('btn').addEventListener('click', test)
</script> 
</body>
</html>
